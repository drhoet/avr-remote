{% extends "layout.html" %}
{% block body %}
	<h1 class="page-header">{{static_info.name}}</h1>
	<div class="row">
		<div class="col-md-3"></div>
		<div class="col-md-6"></div>
		<div class="col-md-3">
			<div id="mainVolumeWrapper">
				<div id="mainVolumeKnobWrapper">
					<input type="text" value="100.0" id="mainVolume" data-displayPrevious="true" data-width="95%">
				</div>
				<div class="btn-group btn-group-justified" role="group">
					<a class="btn btn-default" href="#" role="button">
						<span class="glyphicon glyphicon-volume-down" aria-hidden="true"></span>
					</a>
					<a class="btn btn-default" href="#" role="button">
						<span class="glyphicon glyphicon-volume-off" aria-hidden="true"></span>
					</a>
					<a class="btn btn-default" href="#" role="button">
						<span class="glyphicon glyphicon-volume-up" aria-hidden="true"></span>
					</a>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
{% block script %}
	fallback.ready(function() {
		$.getJSON('/api/v1.0/volume', {}, function(data) {
			$('#mainVolume').val(data.value).trigger('change');
		});

		$(function() {
			$('#mainVolume').knob({
				'min': 0,
				'max': 60,
				'step': 0.5,
				'format': function(value) {
					return sprintf('%04.1f', value);
				},
				'release': function(volume) {
					$.ajax({
						url: '/api/v1.0/volume',
						type: 'PUT',
						data: JSON.stringify({ value: parseFloat($('#mainVolume').val()) }),
						contentType: 'application/json; charset=utf-8'
					});
				}
			});
		});
	});
{% endblock %}